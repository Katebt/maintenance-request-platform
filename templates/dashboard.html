<!-- templates/dashboard.html -->
{% extends "base.html" %}

{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…{% endblock %}

{% block content %}

<div class="dashboard" style="max-width:700px; margin:auto; background:#fff; border-radius:14px; box-shadow:0 2px 10px #0001; padding:24px; margin-top:24px;">
    <div style="display:flex; gap:24px; align-items:center; border-bottom:1px solid #f0f0f0; margin-bottom:24px; padding-bottom:16px;">
        <div style="flex:1;">
            <h2 style="margin:0 0 8px 0; color:#19647e;">Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ {{ user.name }}</h2>
            <div style="color:#666; font-size:1em;">
                <span style="margin-left:12px;">ğŸ“§ {{ user.email }}</span>
                <span style="margin-left:12px;">ğŸ‘¤
                    {% if user.role == "manager" %}Ù…Ø¯ÙŠØ±
                    {% elif user.role == "engineer" %}Ù…Ù‡Ù†Ø¯Ø³
                    {% elif user.role == "admin" or user.role == "superuser" %}Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…
                    {% else %}Ù…Ø³ØªØ®Ø¯Ù…
                    {% endif %}
                </span>
                <span>ğŸ¢ {{ user.department }}</span>
            </div>
        </div>
        <!-- ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ø±Ù…Ø²ÙŠØ© Ø£Ùˆ Ø´Ø¹Ø§Ø± Ù‡Ù†Ø§ Ø¥Ù† Ø£Ø±Ø¯Øª -->
    </div>

    <h3 style="margin-bottom:14px;">Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ</h3>
    {% if requests %}
    <table style="width:100%; border-collapse:collapse; background:#f9f9f9; border-radius:8px; overflow:hidden;">
        <thead>
            <tr style="background:#eceff1; color:#19647e;">
                <th style="padding:10px;">#</th>
                <th style="padding:10px;">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                <th style="padding:10px;">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th style="padding:10px;">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</th>
            </tr>
        </thead>
        <tbody>
            {% for req in requests %}
            <tr style="border-bottom:1px solid #f1f1f1;">
                <td style="text-align:center;">{{ loop.index }}</td>
                <td>{{ req.title }}</td>
                <td>
                    {% if req.status == 'Pending' %}
                        <span style="color:#e6a700;">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>
                    {% elif req.status == 'In Progress' %}
                        <span style="color:#2196f3;">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</span>
                    {% elif req.status == 'Completed' %}
                        <span style="color:#28a745;">Ù…ÙƒØªÙ…Ù„</span>
                    {% elif req.status == 'Closed' %}
                        <span style="color:#dc3545;">Ù…ØºÙ„Ù‚</span>
                    {% else %}
                        <span style="color:#888;">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</span>
                    {% endif %}
                </td>
                <td><a href="/requests/{{ req.id }}" style="color:#19647e;">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div style="padding:16px 0; text-align:center; color:#666;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠÙ‹Ø§.</div>
    {% endif %}
</div>
    <a href="/auth/logout" class="btn">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</a>
</div>
{% endblock %}