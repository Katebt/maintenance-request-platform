<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Ù…Ù†ØµØ© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/bootstrap.rtl.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<header class="mobile-header">
  <div class="header-top">
    <img src="/static/images/hospital-logo.png" class="logo" alt="Ø´Ø¹Ø§Ø±">
    <div class="header-info">
      <h1>Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© ÙˆØ§Ù„Ø£Ø·ÙØ§Ù„</h1>
      <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©</p>
    </div>
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
  </div>
  <nav class="mobile-nav" id="mobileNav">
    <a href="/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    {% if request.url.path != '/' %}
      <a href="javascript:window.history.back();" class="btn"
         style="padding:8px 22px; background:#eceff1; border-radius:7px; text-decoration:none; color:#1565c0; font-weight:500; transition:background 0.17s;"
         aria-label="Ø±Ø¬ÙˆØ¹">â¬…ï¸ Ø±Ø¬ÙˆØ¹</a>
    {% endif %}

    {% if user and user.role in ["manager","superuser"] %}
        <a href="/users/list">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</a>
    {% endif %}
    {% if user and user.role == "engineer" %}
        <a href="/requests/my_requests">Ø·Ù„Ø¨Ø§ØªÙŠ</a>
    {% endif %}
    {% if user %}
        {% if user.role in ["manager", "admin", "superuser"] %}
            <a href="/requests/list">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
        {% elif user.role == "user" %}
            <a href="/users/dashboard">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
        {% endif %}
        <span class="user-badge" style="color:#444; margin:0 10px;">
            ğŸ‘¤ {{ user.name }}
            (
            {% if user.role == "manager" %}Ù…Ø¯ÙŠØ±
            {% elif user.role == "engineer" %}Ù…Ù‡Ù†Ø¯Ø³
            {% elif user.role == "superuser" %}Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…
            {% else %}Ù…Ø³ØªØ®Ø¯Ù…{% endif %}
            )
        </span>
        <a href="/auth/logout" style="color:#d22;">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</a>
    {% else %}
        <a href="/auth/login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
        <a href="/auth/forgot-password">Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</a>
        <a href="/users/register">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</a>
    {% endif %}
  </nav>
</header>

<div class="container">
    {% block content %}{% endblock %}
</div>

<footer>
    Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© 2025 Ù…Ù†ØµØ© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©
</footer>

<script src="/static/js/bootstrap.bundle.min.js"></script>
<script>
  function toggleMenu() {
    const nav = document.getElementById('mobileNav');
    nav.style.display = nav.style.display === 'flex' ? 'none' : 'flex';
  }
</script>
</body>
</html>